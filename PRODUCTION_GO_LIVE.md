# üöÄ PRODUCTION GO-LIVE CHECKLIST - CyberCore

**Project:** CyberCore ‚Äì Alojamento Web & Solu√ß√µes Digitais  
**Platform:** Windows Server + IIS + Plesk  
**PHP Version:** 8.1+  
**Database:** MySQL 5.7+  
**Date:** 28 December 2025

---

## ‚ö†Ô∏è PRE-FLIGHT CHECKS (READ FIRST)

- [ ] **All team members notified** of go-live date
- [ ] **Database backups** created and tested
- [ ] **Rollback plan** documented and reviewed
- [ ] **Emergency contacts** list prepared
- [ ] **DNS propagation** checked (if domain change)
- [ ] **SSL certificate** installed and validated
- [ ] **Plesk license** active and verified
- [ ] **Windows patches** current (Windows Update run)

---

## üîí SECURITY CHECKLIST

### IIS Configuration
- [ ] `web.config` uploaded to application root
- [ ] `web.config` uploaded to `/assets/uploads/`
- [ ] HTTPS redirect rule active (test: http://domain.com ‚Üí https://)
- [ ] Security headers verified:
  - [ ] X-Frame-Options: SAMEORIGIN
  - [ ] X-Content-Type-Options: nosniff
  - [ ] X-XSS-Protection: 1; mode=block
  - [ ] Content-Security-Policy present
  - [ ] Strict-Transport-Security: 31536000 (1 year)
  - [ ] Referrer-Policy: strict-origin-when-cross-origin
- [ ] Request filtering rules active
- [ ] SQL injection blocking enabled
- [ ] Path traversal blocking enabled
- [ ] Directory listing disabled
- [ ] Static content compression enabled
- [ ] PHP FastCGI handler configured correctly

### PHP Configuration (.user.ini)
- [ ] `.user.ini` uploaded to application root
- [ ] `display_errors = Off`
- [ ] `log_errors = On`
- [ ] `error_log` path valid (`D:\logs\php_error.log`)
- [ ] `session.cookie_httponly = 1`
- [ ] `session.cookie_secure = 1`
- [ ] `session.cookie_samesite = "Lax"`
- [ ] `session.use_strict_mode = 1`
- [ ] `expose_php = Off`
- [ ] `allow_url_include = Off`
- [ ] `opcache.enable = 1` (if available)
- [ ] `max_execution_time = 30`
- [ ] `upload_max_filesize = 10M`
- [ ] `memory_limit = 256M`
- [ ] `date.timezone = "Europe/Lisbon"`

### File & Folder Protection
- [ ] `.env` file protected (IIS blocks direct access)
- [ ] `/config` directory blocked from HTTP
- [ ] `/inc` directory blocked from HTTP
- [ ] `/sql` directory blocked from HTTP
- [ ] `/scripts` directory blocked from HTTP
- [ ] `/assets/uploads/` PHP execution disabled
- [ ] Upload folder writable by IIS user
- [ ] Sensitive files non-readable (permissions)

### Environment Configuration
- [ ] `.env` file copied from `.env.example`
- [ ] `APP_ENV=production`
- [ ] `APP_DEBUG=false`
- [ ] `APP_KEY` set to secure 32-char string
- [ ] `BASE_URL=https://yourdomain.com` (HTTPS)
- [ ] `DB_HOST=127.0.0.1` or actual server
- [ ] `DB_USER` set to production user (NOT root)
- [ ] `DB_PASS` set to strong password
- [ ] `DB_NAME=cybercore`
- [ ] `PLESK_API_URL` set correctly
- [ ] `PLESK_API_KEY` set (from Plesk admin)
- [ ] `SMTP_HOST` configured
- [ ] `SMTP_USERNAME` set
- [ ] `SMTP_PASSWORD` set
- [ ] `SMTP_ENCRYPTION=tls`
- [ ] All sensitive values NOT in version control

---

## üóÑÔ∏è DATABASE CHECKLIST

### Setup & Migration
- [ ] MySQL database created: `cybercore`
- [ ] Database imported: `mysql -u root -p < sql/schema.sql`
- [ ] Production user created (NOT root)
- [ ] User privileges limited to: SELECT, INSERT, UPDATE, DELETE
- [ ] **NO GRANT/DROP/CREATE** privileges
- [ ] Database character set: `utf8mb4_unicode_ci`
- [ ] All 15 tables created:
  - [ ] users
  - [ ] password_resets
  - [ ] user_sessions
  - [ ] services
  - [ ] domains
  - [ ] invoices
  - [ ] tickets
  - [ ] ticket_messages
  - [ ] fiscal_change_requests
  - [ ] notifications
  - [ ] logs
  - [ ] email_templates
  - [ ] settings
  - [ ] changelog
  - [ ] login_attempts

### Data Verification
- [ ] Default settings inserted in `settings` table
- [ ] Email templates inserted in `email_templates` table
- [ ] Timezone set to `Europe/Lisbon`
- [ ] VAT rate set to `23.00` (Portugal)
- [ ] Company info in settings (name, NIF, address)

### Backups
- [ ] First backup created: `mysqldump cybercore > backup.sql`
- [ ] Backup compressed: `gzip backup.sql`
- [ ] Backup stored securely (off-site if possible)
- [ ] Backup restoration tested
- [ ] Backup schedule configured in Plesk

---

## üîê AUTHENTICATION & SECURITY

### Admin Account
- [ ] First admin user created via SQL:
  ```sql
  INSERT INTO users (identifier, email, password_hash, first_name, last_name, role, email_verified, created_at, updated_at)
  VALUES ('CYC000001', 'admin@domain.com', '$2y$12$...(hashed)...', 'Admin', 'User', 'Gestor', 1, NOW(), NOW());
  ```
- [ ] Password hashed with bcrypt (cost 12)
- [ ] Admin can login to `/admin/dashboard.php`
- [ ] Admin role verified in database

### Session & CSRF
- [ ] Session variables secure (`$_SESSION['user_id']`, `$_SESSION['user_role']`)
- [ ] CSRF tokens generated by `csrf_token()`
- [ ] CSRF tokens validated by `csrf_validate()`
- [ ] Session cookies are HttpOnly
- [ ] Session cookies are Secure (HTTPS only)
- [ ] Session timeout: 2 hours

### Rate Limiting
- [ ] `inc/rate_limit.php` imported in `client/login.php`
- [ ] Login attempts logged to `login_attempts` table
- [ ] IP-based rate limiting: 10 attempts per hour
- [ ] User-based rate limiting: 5 attempts per hour
- [ ] Lockout duration: 15 minutes

### Password Policy
- [ ] Passwords hashed with `password_hash(..., PASSWORD_BCRYPT, ['cost' => 12])`
- [ ] Password reset tokens unique and time-limited
- [ ] Minimum password length enforced: 8 characters
- [ ] Password strength checked (if implemented)

---

## üìß EMAIL CONFIGURATION

### SMTP Settings
- [ ] Plesk Mail Server accessible (port 25, 587, or 465)
- [ ] SMTP credentials in `.env` (if required)
- [ ] Email templates in database confirmed
- [ ] Test email sent successfully:
  ```bash
  php -r "mail('test@example.com', 'Test', 'Body');"
  ```

### Email Templates
- [ ] email_verification template active
- [ ] password_reset template active
- [ ] welcome_email template active
- [ ] From address: `noreply@domain.com`
- [ ] From name: "CyberCore"

### SPF/DKIM/DMARC
- [ ] SPF record added: `v=spf1 mx a ip4:YOUR_IP ~all`
- [ ] DKIM key generated (in Plesk)
- [ ] DMARC record added: `v=DMARC1; p=quarantine`
- [ ] Email deliverability tested (check spam folder)

---

## üí∞ BILLING & PAYMENT CHECKLIST

### Configuration
- [ ] VAT rate: 23% (Portugal)
- [ ] Currency: EUR (‚Ç¨)
- [ ] Invoice number format: INV-YYYYMMDD-USERID-RAND
- [ ] Payment terms default: 14 days
- [ ] Company NIF in settings (if issuing invoices)

### Service Plans
- [ ] Starter: 4.99‚Ç¨/month or annual with 10% discount
- [ ] Business: 9.99‚Ç¨/month or annual with 10% discount
- [ ] Pro: 19.99‚Ç¨/month or annual with 10% discount
- [ ] All plans in database with correct pricing

### Invoice System
- [ ] Invoice creation works (test order)
- [ ] VAT calculation correct: amount √ó 1.23 = total
- [ ] Invoice PDF generation ready (if implemented)
- [ ] Invoice email sent to customer
- [ ] Admin can view/manage invoices

### Plesk Integration
- [ ] PLESK_API_URL verified
- [ ] PLESK_API_KEY working
- [ ] Service creation triggers Plesk account creation
- [ ] Service cancellation triggers Plesk account suspension
- [ ] Subscription ID stored in database

---

## üé´ SUPPORT TICKET SYSTEM

### Configuration
- [ ] Ticket creation works
- [ ] Ticket threads display correctly
- [ ] Admin can reply to tickets
- [ ] Ticket statuses: open, answered, pending, closed
- [ ] Priorities: low, normal, high, urgent
- [ ] Departments: support, billing, technical, general

### Testing
- [ ] Customer opens ticket
- [ ] Admin receives notification
- [ ] Admin replies to ticket
- [ ] Customer sees reply in thread
- [ ] Ticket can be closed
- [ ] Closed tickets read-only

### Email Notifications
- [ ] Ticket creation email sent (if enabled)
- [ ] Admin reply email sent to customer
- [ ] Customer reply email sent to admin
- [ ] Notification template in database

---

## üë• CLIENT DASHBOARD

### Features Tested
- [ ] User registration works
- [ ] Email verification works
- [ ] Login/logout works
- [ ] Password reset works
- [ ] Profile edit works
- [ ] Dashboard displays correctly

### Client Services Page
- [ ] Service order form works
- [ ] Domain validation works (regex pattern)
- [ ] Plan selection works
- [ ] Billing cycle selection works
- [ ] Service listing shows all customer's services
- [ ] Service cancellation works
- [ ] Status badges display correctly

### Client Invoices Page
- [ ] Invoice creation form works
- [ ] VAT calculation correct
- [ ] Invoice listing shows all customer's invoices
- [ ] Status badges (unpaid, paid, overdue, etc.)
- [ ] Mark paid functionality works
- [ ] Invoice cancellation works
- [ ] PDF download link (if implemented)

### Client Tickets Page
- [ ] Ticket creation form works
- [ ] Ticket listing shows all customer's tickets
- [ ] Conversation view works
- [ ] Customer can reply
- [ ] Customer can close ticket
- [ ] Email notifications sent

---

## üõ†Ô∏è ADMIN PANEL

### Dashboard
- [ ] Metrics display correctly
- [ ] Total clients count accurate
- [ ] Services active/total accurate
- [ ] Invoices unpaid/total accurate
- [ ] Tickets open count accurate
- [ ] Recent users list shows latest registrations
- [ ] Recent tickets list shows latest tickets

### User Management
- [ ] All users listed
- [ ] User details visible
- [ ] Email verification toggle works
- [ ] User role display correct
- [ ] User creation/edit available

### Service Management
- [ ] All services listed
- [ ] Service status badges correct
- [ ] Admin can activate service (provisioning ‚Üí active)
- [ ] Admin can suspend service
- [ ] Customer info displayed
- [ ] Plesk integration verified

### Invoice Management
- [ ] All invoices listed
- [ ] Status badges correct
- [ ] Invoice details accessible
- [ ] Mark paid functionality works (if available)

### Ticket Management
- [ ] All tickets listed
- [ ] Ticket details accessible
- [ ] Admin can reply to ticket
- [ ] Admin can close ticket
- [ ] Conversation thread displays correctly

### Admin Authentication
- [ ] Only admin users can access `/admin/`
- [ ] Non-admin users redirected to login
- [ ] Correct roles required for each action
- [ ] Logout works

---

## üîç SECURITY AUDIT

Run the security audit script:
```bash
php security_check.php
```

Required checks (all must PASS):
- [ ] HTTPS active (‚úì PASS)
- [ ] Security headers present (‚úì PASS)
- [ ] Database connection OK (‚úì PASS)
- [ ] File permissions correct (‚úì PASS)
- [ ] PHP configuration hardened (‚úì PASS)
- [ ] web.config rules active (‚úì PASS)
- [ ] Environment variables set (‚úì PASS)
- [ ] Directory access blocked (‚úì PASS)
- [ ] Uploads folder protected (‚úì PASS)

---

## üìä PERFORMANCE CHECKLIST

### Caching
- [ ] OPcache enabled (PHP info shows opcache)
- [ ] Static assets cached (1 year for images)
- [ ] CSS/JS cached (1 month)
- [ ] Gzip compression enabled
- [ ] Browser cache headers correct

### Database
- [ ] Indexes created on all foreign keys
- [ ] Composite indexes on common queries (user_id + status)
- [ ] Query performance acceptable (< 100ms)
- [ ] No N+1 queries in main pages

### Page Load Times
- [ ] Homepage loads in < 2 seconds
- [ ] Admin dashboard loads in < 1 second
- [ ] Client dashboard loads in < 1 second
- [ ] Database queries optimized

---

## üìã MONITORING & LOGGING

### Error Logging
- [ ] Error log location: `D:\logs\php_error.log`
- [ ] Log directory writable by IIS
- [ ] Logs do not contain sensitive data
- [ ] Logs rotated periodically
- [ ] Alert on critical errors (if monitoring configured)

### Access Logging
- [ ] IIS access logs enabled
- [ ] Logs include requests, responses, errors
- [ ] Failed login attempts logged
- [ ] Admin actions logged

### Monitoring (Optional)
- [ ] Disk space monitoring configured
- [ ] Memory usage monitored
- [ ] Database size monitored
- [ ] Alerts set for thresholds

---

## üîÑ BACKUP & RECOVERY CHECKLIST

### Database Backups
- [ ] Backup script created: `backup-database.sh`
- [ ] Backup scheduled in Plesk (daily at 2 AM)
- [ ] Backup location: `D:\backups\cybercore\`
- [ ] Retention: 30 days
- [ ] Test restore from backup successful

### File Backups
- [ ] Backup script created: `backup-files.sh`
- [ ] Backup scheduled (weekly Sundays at 3 AM)
- [ ] Backup location: `D:\backups\cybercore\files\`
- [ ] Retention: 7 days
- [ ] Excludes: logs, .git, node_modules, vendor

### Disaster Recovery
- [ ] Recovery procedure documented
- [ ] Restore script available
- [ ] Recovery time objective (RTO) defined: 1 hour
- [ ] Recovery point objective (RPO) defined: 24 hours
- [ ] Team trained on recovery procedure

---

## üåç DOMAIN & DNS CHECKLIST

### Domain Configuration
- [ ] Domain registrar updated with correct nameservers
- [ ] DNS A record points to server IP
- [ ] DNS TTL lowered temporarily (during migration)
- [ ] DNS propagation checked (24-48 hours)
- [ ] www subdomain configured (if needed)
- [ ] Mail records (MX) configured

### SSL/TLS Certificate
- [ ] Certificate installed in Plesk
- [ ] Certificate covers all domains/subdomains
- [ ] Certificate valid and not expired
- [ ] Certificate auto-renewal configured
- [ ] Certificate chain complete

### HTTPS/HTTP
- [ ] HTTP redirects to HTTPS (301)
- [ ] HSTS header active
- [ ] No mixed content (all resources HTTPS)
- [ ] SSL/TLS Labs score: A or A+ (https://www.ssllabs.com/)

---

## ‚úÖ FINAL TESTING

### User Journey - Registration
- [ ] User registers with email
- [ ] Verification email sent
- [ ] User clicks verification link
- [ ] Email marked verified
- [ ] User can login

### User Journey - Order Service
- [ ] User logs in
- [ ] User navigates to Services
- [ ] User fills order form (domain, plan, cycle)
- [ ] User submits order
- [ ] Service appears in list
- [ ] Status is "provisioning" or "active"
- [ ] Confirmation email sent

### User Journey - Invoice
- [ ] Invoice created for service
- [ ] Invoice contains correct pricing + VAT
- [ ] Invoice shows due date
- [ ] Customer can mark invoice as paid
- [ ] Paid date updated
- [ ] Invoice status changes to "paid"

### User Journey - Support
- [ ] User opens support ticket
- [ ] Ticket appears in admin panel
- [ ] Admin replies to ticket
- [ ] Customer sees reply
- [ ] Customer replies
- [ ] Admin sees customer reply
- [ ] Ticket can be closed
- [ ] Notification emails sent

### Admin Journey
- [ ] Admin logs in to `/admin/`
- [ ] Dashboard shows correct metrics
- [ ] Can manage users (view, verify email)
- [ ] Can manage services (activate, suspend)
- [ ] Can manage invoices (list, details)
- [ ] Can manage tickets (reply, close)

### Plesk Integration
- [ ] Create service in CyberCore
- [ ] Plesk account created automatically
- [ ] Domain created in Plesk
- [ ] Nameservers point to Plesk
- [ ] Domain accessible
- [ ] Cancel service suspends Plesk account

---

## üéØ GO-LIVE SIGN-OFF

**Performed by:** _________________________ (Name)  
**Date:** _________________________ (Date)  
**Time:** _________________________ (Time)  

**Checklist Status:**
- [ ] **All items above: PASSED**
- [ ] **Security audit: PASSED**
- [ ] **Performance acceptable: YES**
- [ ] **Backups tested: YES**
- [ ] **Team trained: YES**

**Sign-off:**
- **Project Manager:** _________________________ ‚úì
- **Tech Lead:** _________________________ ‚úì
- **Security Officer:** _________________________ ‚úì

---

## üìû PRODUCTION SUPPORT CONTACTS

**Primary Contact:** _________________________ (Phone/Email)  
**Secondary Contact:** _________________________ (Phone/Email)  
**Escalation:** _________________________ (Phone/Email)  

**Status Page:** https://status.yourdomain.com  
**Monitoring Dashboard:** https://monitoring.yourdomain.com  
**Admin Panel:** https://yourdomain.com/admin/  

---

## üö® EMERGENCY PROCEDURES

### If Downtime Occurs
1. Check error logs: `D:\logs\php_error.log`
2. Check IIS logs: `C:\inetpub\logs\LogFiles\`
3. Verify database connectivity
4. Check Plesk email alerts
5. Contact hosting support
6. If unresolvable: prepare rollback

### Rollback Steps (If Required)
1. Stop IIS application pool
2. Restore database: `mysql cybercore < backup.sql`
3. Restore files: extract from backup archive
4. Restart IIS application pool
5. Verify all systems operational
6. Post-mortem investigation

### Post-Incident
- [ ] Root cause analysis completed
- [ ] Corrective action implemented
- [ ] Team debriefing held
- [ ] Documentation updated
- [ ] Monitoring improved

---

## üìù NOTES & OBSERVATIONS

```
[Space for deployment notes, issues encountered, resolutions, etc.]

```

---

## ‚ú® CONGRATULATIONS!

If all items are checked, **CyberCore is now LIVE in production!**

Monitor closely for the first 24-48 hours.

**Thank you!** üöÄ
